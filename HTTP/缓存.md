- 缓存
#### 缓存是用来缓解服务器端压力、提升性能、减少带宽消耗，请求资源的副本存储下来的技术。
- 缓存截止到下一次发生改变
- 私有缓存 共享缓存
<pre>Cache-Control: private Cache-Control: public</pre>

- 浏览器缓存
###### 浏览器对于缓存的处理是根据第一次请求资源时返回的<b>响应头</b>来确定的。浏览器对于请求资源, 拥有一系列成熟的缓存策略. 按照发生的时间顺序分别为<b>存储策略</b>, <b>过期策略</b>, <b>协商策略</b>, 其中存储策略在收到响应后应用, 过期策略, 协商策略在发送请求前应用
- 代理缓存---共享
- 网关、CDN、反向代理缓存和负载均衡
##### 缓存控制

<p align="center">
<img src="../img/cache.svg" alt="cache">
</p>
<pre> 

- cache-control 通用头
  请求指令
  Cache-Control: must-revalidate缓存验证，用户点击刷新就开始缓存验证，缓存的响应头里面有该字段
  Cache-Control: max-age=31536000 缓存过期的相对时间
  Cache-Control: no-store  不缓存请求或响应内容
  Cache-Control: no-cache  强制源服务器再次验证
  Cache-Control: min-fresh 期望在指定时间内响应仍然有效
  Cache-Control: no-transform   代理不可更改媒体类型
  Cache-Control: only-if-cached 从缓存获取
  Cache-Control: extension
  响应指令
  Cache-Control: public
  Cache-Control: private
  Cache-Control: no-cache     缓存前必须先确认其有效性
  Cache-Control: no-store
  Cache-Control: no-transform
  Cache-Control: must-revalidate 可缓存但必须再向源服务器进确认
  Cache-Control: proxy-revalidate 要求中间缓存服务器对缓存的响应有效性再进行确认
  Cache-Control: max-age
  Cache-Control: s-maxage 公共缓存服务器响应的最大Age值
  Cache-Control: cache-extension 
- Date 通用头 创建报文的时间
- pragma 存储策略 通用头 同Cache-Control: no-cache 强制验证缓存 1.0版本字段 Pragma的优先级高于Cache-Control和Expires
- Age 响应头 资源在缓存代理中的时间取决于max-age 用来区分请求的资源来自源服务器还是缓存服务器的缓存的
- Vary 响应头 缓存服务器会以User-Agent和 Accept-Encoding两个请求首部字段来区分缓存版本。根据请求头里的这两个字段来
决定返回给客户端什么内容 

###### 协商策略 浏览器对资源做重新检查验证的时候会使用到。过期但可用：返回304无实体响应；过期不可用：返回请求实体
- Etag 响应头, 服务器生成资源的唯一标识， 缓存的强校验器，对代理不透明 。之后客户端请求头If-None-Match值等于Etag 可验证缓存
- Last-Modified 实体头,最后一次修改时间弱校验器（精确到1s）之后客户端请求头 If-Modified-Since值等于Last-Modified验证本地缓存是否可用
###### 过期策略
- Expires 实体头 缓存过期的绝对时间
</pre>

###### 如果响应头中没有可以用来判断缓存是否过期的字段，但是有Date和Last-Modified,可以用其差值的10%来用作缓存周期